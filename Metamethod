-- // variables
local library = {}
local pages = {}
local utility = {}

-- // functions
utility.new = function(instance, properties)
    local ins = Instance.new(instance)
    for property, value in pairs(properties) do
        ins[property] = value
    end
    return ins
end

function library:new(props)
    local name = props.name or "New UI"
    local color = props.color or Color3.fromRGB(225, 58, 81)

    local window = {}
    
    local screen = utility.new(
        "ScreenGui",
        {
            Name = tostring(math.random(0, 999999)),
            DisplayOrder = 9999,
            ResetOnSpawn = false,
            ZIndexBehavior = "Global",
            Parent = game.CoreGui
        }
    )

    local outline = utility.new(
        "Frame",
        {
            BackgroundColor3 = color,
            Size = UDim2.new(0, 500, 0, 606),
            Position = UDim2.new(0.5, 0, 0.5, 0),
            AnchorPoint = Vector2.new(0.5, 0.5),
            Parent = screen
        }
    )

    local main = utility.new(
        "Frame",
        {
            BackgroundColor3 = Color3.fromRGB(20, 20, 20),
            Size = UDim2.new(1, 0, 1, 0),
            Position = UDim2.new(0, 0, 0, 0),
            Parent = outline
        }
    )

    local title = utility.new(
        "TextLabel",
        {
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 0, 20),
            Position = UDim2.new(0, 0, 0, 0),
            Font = Enum.Font.SourceSansBold,
            Text = name,
            TextColor3 = Color3.fromRGB(255, 255, 255),
            TextSize = 16,
            Parent = main
        }
    )

    local tabs = utility.new(
        "Frame",
        {
            BackgroundColor3 = Color3.fromRGB(20, 20, 20),
            Size = UDim2.new(1, 0, 0, 25),
            Position = UDim2.new(0, 0, 0, 20),
            Parent = main
        }
    )

    local tabsbuttons = utility.new(
        "Frame",
        {
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 1, 0),
            Parent = tabs
        }
    )

    utility.new(
        "UIListLayout",
        {
            FillDirection = Enum.FillDirection.Horizontal,
            Padding = UDim.new(0, 10),
            Parent = tabsbuttons
        }
    )

    -- // page function
    function window:page(props)
        local name = props.name or "New Tab"
        
        local tabbutton = utility.new(
            "TextButton",
            {
                BackgroundTransparency = 1,  -- No background
                Size = UDim2.new(0, 100, 1, 0),  -- Width of each tab
                Text = name,
                TextColor3 = Color3.fromRGB(255, 255, 255),
                TextSize = 14,
                Parent = tabsbuttons
            }
        )

        local red_underline = utility.new(
            "Frame",
            {
                BackgroundColor3 = Color3.fromRGB(255, 0, 0),  -- Red underline color
                Size = UDim2.new(1, 0, 0, 2),  -- A thin line at the bottom of the tab
                Position = UDim2.new(0, 0, 1, 0),  -- Positioned at the bottom
                BorderSizePixel = 0,  -- No border for the underline
                Visible = false,  -- Initially hidden for inactive tabs
                Parent = tabbutton
            }
        )

        tabbutton.MouseButton1Click:Connect(function()
            for _, btn in pairs(tabsbuttons:GetChildren()) do
                if btn:IsA("TextButton") then
                    btn.TextColor3 = Color3.fromRGB(255, 255, 255)  -- Reset text color
                    red_underline.Visible = false  -- Hide red underline
                end
            end
            tabbutton.TextColor3 = Color3.fromRGB(255, 0, 0)  -- Change active tab text color
            red_underline.Visible = true  -- Show red underline
        end)
    end

    window.tabs = tabsbuttons
    setmetatable(window, library)
    return window
end

-- Example of using the library
local myLibrary = library:new({ name = "My UI", color = Color3.fromRGB(60, 60, 60) })
local myPage = myLibrary:page({ name = "Tab 1" })
local myPage2 = myLibrary:page({ name = "Tab 2" })
